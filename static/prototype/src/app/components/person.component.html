<div class="person-div main-viz">
  <section class="viz-container">
    <loading-data *ngIf="loadingData" class="color-person"></loading-data>

      <div class="persons">
        <div class="person" *ngFor="let p of persons" (click)="onSelect(p)"
        [style.transform]="detail ? p.transformDetail : p.transform"
        [style.max-width]="detail ? '176px' : (100 / p.scale) + '%'"
        [style.padding]="detail ? '2px 12px' : (2 / p.scale) + 'px ' + (12 / p.scale) + 'px'"
        [style.border-radius]="(5 / p.scale) + 'px'">
          <span>{{p.name}} {{p.lastname}}</span>
        </div>
      </div>
    <div class="helper" #svgWrapper>
      <svg width="100%" height="0">
        <g #temp></g>
      </svg>
    </div>
    <svg class="person-list-detail" *ngIf="detail"
      width="100%" [attr.height]="persons.length * 32 + 32">
      <rect class="grid" x="-24" y="16" [attr.width]="width + 48" height="1"></rect>
      <rect class="grid" [attr.x]="width - 60" y="16" width="1" [attr.height]="persons.length * 32"></rect>
      <g class="tick" *ngFor="let t of ticks">
        <text class="grid-label" [attr.x]="t.x" y="12">{{t.year}}</text>
        <text class="grid-label" [attr.x]="t.x" [attr.y]="persons.length * 32 + 28">{{t.year}}</text>
        <rect class="grid" [attr.x]="t.x" y="16" width="1" [attr.height]="persons.length * 32"></rect>
      </g>
      <g transform="translate(0 16)">
        <g *ngFor="let p of persons; let i = index" [attr.transform]="'translate(0 ' + i * 32 + ')'">
          <rect class="grid" x="-24" y="32" [attr.width]="width + 48" height="1"></rect>
          <text class="count" [attr.x]="width" y="21">{{formatNum(p.count)}}</text>
        </g>
      </g>
    </svg>
  </section>
</div>
